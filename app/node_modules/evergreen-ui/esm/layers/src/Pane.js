import _extends from "@babel/runtime/helpers/esm/extends";
import _slicedToArray from "@babel/runtime/helpers/esm/slicedToArray";
import _objectWithoutProperties from "@babel/runtime/helpers/esm/objectWithoutProperties";
import _classCallCheck from "@babel/runtime/helpers/esm/classCallCheck";
import _createClass from "@babel/runtime/helpers/esm/createClass";
import _possibleConstructorReturn from "@babel/runtime/helpers/esm/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime/helpers/esm/getPrototypeOf";
import _assertThisInitialized from "@babel/runtime/helpers/esm/assertThisInitialized";
import _inherits from "@babel/runtime/helpers/esm/inherits";
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

import cx from 'classnames';
import { css as glamorCss } from 'glamor';
import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import Box from 'ui-box';
import { withTheme } from '../../theme';
var StringAndBoolPropType = PropTypes.oneOfType([PropTypes.string, PropTypes.bool]);

var Pane =
/*#__PURE__*/
function (_PureComponent) {
  _inherits(Pane, _PureComponent);

  function Pane() {
    var _getPrototypeOf2;

    var _this;

    _classCallCheck(this, Pane);

    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Pane)).call.apply(_getPrototypeOf2, [this].concat(args)));

    _defineProperty(_assertThisInitialized(_this), "getHoverElevationStyle", function (hoverElevation, css) {
      var theme = _this.props.theme;
      if (!Number.isInteger(hoverElevation)) return {};
      return {
        transitionDuration: '150ms',
        transitionProperty: 'box-shadow, transform',
        transitionTimingFunction: "cubic-bezier(0.0, 0.0, 0.2, 1)",
        ':hover': _objectSpread({}, css[':hover'] || {}, {
          transform: 'translateY(-2px)',
          boxShadow: theme.getElevation(hoverElevation)
        })
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getActiveElevationStyle", function (activeElevation, css) {
      var theme = _this.props.theme;
      if (!Number.isInteger(activeElevation)) return {};
      return {
        ':active': _objectSpread({}, css[':active'] || {}, {
          transform: 'translateY(-1px)',
          boxShadow: theme.getElevation(activeElevation)
        })
      };
    });

    _defineProperty(_assertThisInitialized(_this), "getBorderSideProperty", function (_ref) {
      var borderSideProperty = _ref.borderSideProperty,
          border = _ref.border;
      var theme = _this.props.theme;

      if (Object.prototype.hasOwnProperty.call(theme.colors.border, borderSideProperty)) {
        return "1px solid ".concat(theme.colors.border[borderSideProperty]);
      }

      if (borderSideProperty === true) {
        return "1px solid ".concat(theme.colors.border["default"]);
      }

      if (borderSideProperty === false) {
        return null;
      }

      if (Object.prototype.hasOwnProperty.call(theme.colors.border, border)) {
        return "1px solid ".concat(theme.colors.border[border]);
      }

      if (border === true) {
        return "1px solid ".concat(theme.colors.border["default"]);
      }

      return borderSideProperty;
    });

    return _this;
  }

  _createClass(Pane, [{
    key: "render",
    value: function render() {
      var _this2 = this;

      var _this$props = this.props,
          theme = _this$props.theme,
          background = _this$props.background,
          elevation = _this$props.elevation,
          hoverElevation = _this$props.hoverElevation,
          activeElevation = _this$props.activeElevation,
          border = _this$props.border,
          borderTop = _this$props.borderTop,
          borderRight = _this$props.borderRight,
          borderBottom = _this$props.borderBottom,
          borderLeft = _this$props.borderLeft,
          _this$props$css = _this$props.css,
          css = _this$props$css === void 0 ? {} : _this$props$css,
          props = _objectWithoutProperties(_this$props, ["theme", "background", "elevation", "hoverElevation", "activeElevation", "border", "borderTop", "borderRight", "borderBottom", "borderLeft", "css"]);

      var elevationStyle = theme.getElevation(elevation);
      var hoverElevationStyle = this.getHoverElevationStyle(hoverElevation, css);
      var activeElevationStyle = this.getActiveElevationStyle(activeElevation, css);

      var _map = [borderTop, borderRight, borderBottom, borderLeft].map(function (borderSideProperty) {
        return _this2.getBorderSideProperty({
          borderSideProperty: borderSideProperty,
          border: border
        });
      }),
          _map2 = _slicedToArray(_map, 4),
          _borderTop = _map2[0],
          _borderRight = _map2[1],
          _borderBottom = _map2[2],
          _borderLeft = _map2[3];

      var className = cx(props.className, glamorCss(_objectSpread({}, css, {}, hoverElevationStyle, {}, activeElevationStyle)).toString());
      return React.createElement(Box, _extends({
        borderTop: _borderTop,
        borderRight: _borderRight,
        borderBottom: _borderBottom,
        borderLeft: _borderLeft,
        boxShadow: elevationStyle,
        background: theme.getBackground(background)
      }, props, {
        className: className
      }));
    }
  }]);

  return Pane;
}(PureComponent);

Pane.displayName = "Pane";

_defineProperty(Pane, "propTypes", _objectSpread({}, Box.propTypes, {
  /**
   * Background property.
   * `tint1`, `tint2` etc. from `theme.colors.background` are available.
   */
  background: PropTypes.string,

  /**
   * Elevation of the Pane.
   * Values: 0, 1, 2, 3, 4.
   */
  elevation: PropTypes.oneOf([0, 1, 2, 3, 4]),

  /**
   * Elevation of the Pane on hover. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  hoverElevation: PropTypes.oneOf([0, 1, 2, 3, 4]),

  /**
   * Elevation of the Pane on click. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  activeElevation: PropTypes.oneOf([0, 1, 2, 3, 4]),

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, muted, default.
   */
  border: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderTop: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderRight: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderBottom: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderLeft: StringAndBoolPropType,

  /**
   * Theme provided by ThemeProvider.
   */
  theme: PropTypes.object.isRequired
}));

export default withTheme(Pane);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9sYXllcnMvc3JjL1BhbmUuanMiXSwibmFtZXMiOlsiY3giLCJjc3MiLCJnbGFtb3JDc3MiLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJCb3giLCJ3aXRoVGhlbWUiLCJTdHJpbmdBbmRCb29sUHJvcFR5cGUiLCJvbmVPZlR5cGUiLCJzdHJpbmciLCJib29sIiwiUGFuZSIsImhvdmVyRWxldmF0aW9uIiwidGhlbWUiLCJwcm9wcyIsIk51bWJlciIsImlzSW50ZWdlciIsInRyYW5zaXRpb25EdXJhdGlvbiIsInRyYW5zaXRpb25Qcm9wZXJ0eSIsInRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbiIsInRyYW5zZm9ybSIsImJveFNoYWRvdyIsImdldEVsZXZhdGlvbiIsImFjdGl2ZUVsZXZhdGlvbiIsImJvcmRlclNpZGVQcm9wZXJ0eSIsImJvcmRlciIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvbG9ycyIsImJhY2tncm91bmQiLCJlbGV2YXRpb24iLCJib3JkZXJUb3AiLCJib3JkZXJSaWdodCIsImJvcmRlckJvdHRvbSIsImJvcmRlckxlZnQiLCJlbGV2YXRpb25TdHlsZSIsImhvdmVyRWxldmF0aW9uU3R5bGUiLCJnZXRIb3ZlckVsZXZhdGlvblN0eWxlIiwiYWN0aXZlRWxldmF0aW9uU3R5bGUiLCJnZXRBY3RpdmVFbGV2YXRpb25TdHlsZSIsIm1hcCIsImdldEJvcmRlclNpZGVQcm9wZXJ0eSIsIl9ib3JkZXJUb3AiLCJfYm9yZGVyUmlnaHQiLCJfYm9yZGVyQm90dG9tIiwiX2JvcmRlckxlZnQiLCJjbGFzc05hbWUiLCJ0b1N0cmluZyIsImdldEJhY2tncm91bmQiLCJwcm9wVHlwZXMiLCJvbmVPZiIsIm9iamVjdCIsImlzUmVxdWlyZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU9BLEVBQVAsTUFBZSxZQUFmO0FBQ0EsU0FBU0MsR0FBRyxJ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LEVBQUU1QixxQjs7QUFFZDs7OztBQUlBNkIsRUFBQUEsVUFBVSxFQUFFN0IscUI7O0FBRVo7OztBQUdBTSxFQUFBQSxLQUFLLEVBQUVULFNBQVMsQ0FBQ2lELE1BQVYsQ0FBaUJDOzs7QUEwSDVCLGVBQWVoRCxTQUFTLENBQUNLLElBQUQsQ0FBeEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY3ggZnJvbSAnY2xhc3NuYW1lcydcbmltcG9ydCB7IGNzcyBhcyBnbGFtb3JDc3MgfSBmcm9tICdnbGFtb3InXG5pbXBvcnQgUmVhY3QsIHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IEJveCBmcm9tICd1aS1ib3gnXG5pbXBvcnQgeyB3aXRoVGhlbWUgfSBmcm9tICcuLi8uLi90aGVtZSdcblxuY29uc3QgU3RyaW5nQW5kQm9vbFByb3BUeXBlID0gUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gIFByb3BUeXBlcy5zdHJpbmcsXG4gIFByb3BUeXBlcy5ib29sXG5dKVxuXG5jbGFzcyBQYW5lIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLyoqXG4gICAgICogQ29tcG9zZXMgdGhlIEJveCBjb21wb25lbnQgYXMgdGhlIGJhc2UuXG4gICAgICovXG4gICAgLi4uQm94LnByb3BUeXBlcyxcblxuICAgIC8qKlxuICAgICAqIEJhY2tncm91bmQgcHJvcGVydHkuXG4gICAgICogYHRpbnQxYCwgYHRpbnQyYCBldGMuIGZyb20gYHRoZW1lLmNvbG9ycy5iYWNrZ3JvdW5kYCBhcmUgYXZhaWxhYmxlLlxuICAgICAqL1xuICAgIGJhY2tncm91bmQ6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBFbGV2YXRpb24gb2YgdGhlIFBhbmUuXG4gICAgICogVmFsdWVzOiAwLCAxLCAyLCAzLCA0LlxuICAgICAqL1xuICAgIGVsZXZhdGlvbjogUHJvcFR5cGVzLm9uZU9mKFswLCAxLCAyLCAzLCA0XSksXG5cbiAgICAvKipcbiAgICAgKiBFbGV2YXRpb24gb2YgdGhlIFBhbmUgb24gaG92ZXIuIE1pZ2h0IGdldCBkZXByZWNhdGVkLlxuICAgICAqIFZhbHVlczogMCwgMSwgMiwgMywgNC5cbiAgICAgKi9cbiAgICBob3ZlckVsZXZhdGlvbjogUHJvcFR5cGVzLm9uZU9mKFswLCAxLCAyLCAzLCA0XSksXG5cbiAgICAvKipcbiAgICAgKiBFbGV2YXRpb24gb2YgdGhlIFBhbmUgb24gY2xpY2suIE1pZ2h0IGdldCBkZXByZWNhdGVkLlxuICAgICAqIFZhbHVlczogMCwgMSwgMiwgMywgNC5cbiAgICAgKi9cbiAgICBhY3RpdmVFbGV2YXRpb246IFByb3BUeXBlcy5vbmVPZihbMCwgMSwgMiwgMywgNF0pLFxuXG4gICAgLyoqXG4gICAgICogQ2FuIGJlIGEgZXhwbGljaXQgYm9yZGVyIHZhbHVlIG9yIGEgYm9vbGVhbi5cbiAgICAgKiBWYWx1ZXM6IHRydWUsIG11dGVkLCBkZWZhdWx0LlxuICAgICAqL1xuICAgIGJvcmRlcjogU3RyaW5nQW5kQm9vbFByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogQ2FuIGJlIGEgZXhwbGljaXQgYm9yZGVyIHZhbHVlIG9yIGEgYm9vbGVhbi5cbiAgICAgKiBWYWx1ZXM6IHRydWUsIGV4dHJhTXV0ZWQsIG11dGVkLCBkZWZhdWx0LlxuICAgICAqL1xuICAgIGJvcmRlclRvcDogU3RyaW5nQW5kQm9vbFByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogQ2FuIGJlIGEgZXhwbGljaXQgYm9yZGVyIHZhbHVlIG9yIGEgYm9vbGVhbi5cbiAgICAgKiBWYWx1ZXM6IHRydWUsIGV4dHJhTXV0ZWQsIG11dGVkLCBkZWZhdWx0LlxuICAgICAqL1xuICAgIGJvcmRlclJpZ2h0OiBTdHJpbmdBbmRCb29sUHJvcFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgYSBleHBsaWNpdCBib3JkZXIgdmFsdWUgb3IgYSBib29sZWFuLlxuICAgICAqIFZhbHVlczogdHJ1ZSwgZXh0cmFNdXRlZCwgbXV0ZWQsIGRlZmF1bHQuXG4gICAgICovXG4gICAgYm9yZGVyQm90dG9tOiBTdHJpbmdBbmRCb29sUHJvcFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgYSBleHBsaWNpdCBib3JkZXIgdmFsdWUgb3IgYSBib29sZWFuLlxuICAgICAqIFZhbHVlczogdHJ1ZSwgZXh0cmFNdXRlZCwgbXV0ZWQsIGRlZmF1bHQuXG4gICAgICovXG4gICAgYm9yZGVyTGVmdDogU3RyaW5nQW5kQm9vbFByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogVGhlbWUgcHJvdmlkZWQgYnkgVGhlbWVQcm92aWRlci5cbiAgICAgKi9cbiAgICB0aGVtZTogUHJvcFR5cGVzLm9iamVjdC5pc1JlcXVpcmVkXG4gIH1cblxuICBnZXRIb3ZlckVsZXZhdGlvblN0eWxlID0gKGhvdmVyRWxldmF0aW9uLCBjc3MpID0+IHtcbiAgICBjb25zdCB7IHRoZW1lIH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKGhvdmVyRWxldmF0aW9uKSkgcmV0dXJuIHt9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAnMTUwbXMnLFxuICAgICAgdHJhbnNpdGlvblByb3BlcnR5OiAnYm94LXNoYWRvdywgdHJhbnNmb3JtJyxcbiAgICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogYGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKWAsXG4gICAgICAnOmhvdmVyJzoge1xuICAgICAgICAuLi4oY3NzWyc6aG92ZXInXSB8fCB7fSksXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTJweCknLFxuICAgICAgICBib3hTaGFkb3c6IHRoZW1lLmdldEVsZXZhdGlvbihob3ZlckVsZXZhdGlvbilcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRBY3RpdmVFbGV2YXRpb25TdHlsZSA9IChhY3RpdmVFbGV2YXRpb24sIGNzcykgPT4ge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoYWN0aXZlRWxldmF0aW9uKSkgcmV0dXJuIHt9XG5cbiAgICByZXR1cm4ge1xuICAgICAgJzphY3RpdmUnOiB7XG4gICAgICAgIC4uLihjc3NbJzphY3RpdmUnXSB8fCB7fSksXG4gICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTFweCknLFxuICAgICAgICBib3hTaGFkb3c6IHRoZW1lLmdldEVsZXZhdGlvbihhY3RpdmVFbGV2YXRpb24pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0Qm9yZGVyU2lkZVByb3BlcnR5ID0gKHsgYm9yZGVyU2lkZVByb3BlcnR5LCBib3JkZXIgfSkgPT4ge1xuICAgIGNvbnN0IHsgdGhlbWUgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoXG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgIHRoZW1lLmNvbG9ycy5ib3JkZXIsXG4gICAgICAgIGJvcmRlclNpZGVQcm9wZXJ0eVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIGAxcHggc29saWQgJHt0aGVtZS5jb2xvcnMuYm9yZGVyW2JvcmRlclNpZGVQcm9wZXJ0eV19YFxuICAgIH1cblxuICAgIGlmIChib3JkZXJTaWRlUHJvcGVydHkgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlci5kZWZhdWx0fWBcbiAgICB9XG5cbiAgICBpZiAoYm9yZGVyU2lkZVByb3BlcnR5ID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoZW1lLmNvbG9ycy5ib3JkZXIsIGJvcmRlcikpIHtcbiAgICAgIHJldHVybiBgMXB4IHNvbGlkICR7dGhlbWUuY29sb3JzLmJvcmRlcltib3JkZXJdfWBcbiAgICB9XG5cbiAgICBpZiAoYm9yZGVyID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gYDFweCBzb2xpZCAke3RoZW1lLmNvbG9ycy5ib3JkZXIuZGVmYXVsdH1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGJvcmRlclNpZGVQcm9wZXJ0eVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIHRoZW1lLFxuXG4gICAgICBiYWNrZ3JvdW5kLFxuXG4gICAgICBlbGV2YXRpb24sXG4gICAgICBob3ZlckVsZXZhdGlvbixcbiAgICAgIGFjdGl2ZUVsZXZhdGlvbixcblxuICAgICAgYm9yZGVyLFxuICAgICAgYm9yZGVyVG9wLFxuICAgICAgYm9yZGVyUmlnaHQsXG4gICAgICBib3JkZXJCb3R0b20sXG4gICAgICBib3JkZXJMZWZ0LFxuXG4gICAgICBjc3MgPSB7fSxcbiAgICAgIC4uLnByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcblxuICAgIGNvbnN0IGVsZXZhdGlvblN0eWxlID0gdGhlbWUuZ2V0RWxldmF0aW9uKGVsZXZhdGlvbilcbiAgICBjb25zdCBob3ZlckVsZXZhdGlvblN0eWxlID0gdGhpcy5nZXRIb3ZlckVsZXZhdGlvblN0eWxlKGhvdmVyRWxldmF0aW9uLCBjc3MpXG4gICAgY29uc3QgYWN0aXZlRWxldmF0aW9uU3R5bGUgPSB0aGlzLmdldEFjdGl2ZUVsZXZhdGlvblN0eWxlKFxuICAgICAgYWN0aXZlRWxldmF0aW9uLFxuICAgICAgY3NzXG4gICAgKVxuXG4gICAgY29uc3QgW19ib3JkZXJUb3AsIF9ib3JkZXJSaWdodCwgX2JvcmRlckJvdHRvbSwgX2JvcmRlckxlZnRdID0gW1xuICAgICAgYm9yZGVyVG9wLFxuICAgICAgYm9yZGVyUmlnaHQsXG4gICAgICBib3JkZXJCb3R0b20sXG4gICAgICBib3JkZXJMZWZ0XG4gICAgXS5tYXAoYm9yZGVyU2lkZVByb3BlcnR5ID0+XG4gICAgICB0aGlzLmdldEJvcmRlclNpZGVQcm9wZXJ0eSh7IGJvcmRlclNpZGVQcm9wZXJ0eSwgYm9yZGVyIH0pXG4gICAgKVxuXG4gICAgY29uc3QgY2xhc3NOYW1lID0gY3goXG4gICAgICBwcm9wcy5jbGFzc05hbWUsXG4gICAgICBnbGFtb3JDc3Moe1xuICAgICAgICAuLi5jc3MsXG4gICAgICAgIC4uLmhvdmVyRWxldmF0aW9uU3R5bGUsXG4gICAgICAgIC4uLmFjdGl2ZUVsZXZhdGlvblN0eWxlXG4gICAgICB9KS50b1N0cmluZygpXG4gICAgKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3hcbiAgICAgICAgYm9yZGVyVG9wPXtfYm9yZGVyVG9wfVxuICAgICAgICBib3JkZXJSaWdodD17X2JvcmRlclJpZ2h0fVxuICAgICAgICBib3JkZXJCb3R0b209e19ib3JkZXJCb3R0b219XG4gICAgICAgIGJvcmRlckxlZnQ9e19ib3JkZXJMZWZ0fVxuICAgICAgICBib3hTaGFkb3c9e2VsZXZhdGlvblN0eWxlfVxuICAgICAgICBiYWNrZ3JvdW5kPXt0aGVtZS5nZXRCYWNrZ3JvdW5kKGJhY2tncm91bmQpfVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lfVxuICAgICAgLz5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aFRoZW1lKFBhbmUpXG4iXX0=